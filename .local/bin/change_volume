#!/bin/bash

if [ $# -ne 1 ]; then
    echo "Error: A value must be provided."
    exit 1
fi

value=$1

current_vol=$(pactl get-sink-volume @DEFAULT_SINK@ | awk '{print $5}' | tr -d '%')

new_vol=$((current_vol + value))

if [ "$new_vol" -gt 200 ]; then
    new_vol=200
elif [ "$new_vol" -lt 0 ]; then
    new_vol=0
fi

pactl set-sink-volume @DEFAULT_SINK@ ${new_vol}%
current_vol=$(pactl get-sink-volume @DEFAULT_SINK@ | awk '{print $5}' | tr -d '%')

if [ "$current_vol" -gt 70 ]; then
    icon="audio-volume-high"
elif [ "$current_vol" -lt 40 ]; then
    icon="audio-volume-low"
else
    icon="audio-volume-medium"
fi

notify-send -a volume "Volume: $current_vol%" --icon="$icon" -h string:x-canonical-private-synchronous:volume
